{"version":3,"file":"index.umd.js","sources":["../src/utils/validation.ts","../src/types/network.ts","../src/utils/network.ts","../src/api/client.ts","../src/index.ts"],"sourcesContent":["import { Network } from '../types/network';\n\nexport function validateAddress(address: string): void {\n  if (!address || typeof address !== 'string') {\n    throw new Error('Address must be a non-empty string');\n  }\n  \n  if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {\n    throw new Error('Invalid Ethereum address format');\n  }\n}\n\nexport function validateTransactionHash(hash: string): void {\n  if (!hash || typeof hash !== 'string') {\n    throw new Error('Transaction hash must be a non-empty string');\n  }\n  \n  if (!/^0x[a-fA-F0-9]{64}$/.test(hash)) {\n    throw new Error('Invalid transaction hash format');\n  }\n}\n\nexport function validateNetwork(network: string): asserts network is Network {\n  if (!isValidNetwork(network)) {\n    throw new Error(`Invalid network: ${network}. Must be 'testnet' or 'mainnet'`);\n  }\n}\n\nexport function isValidNetwork(network: string): network is Network {\n  return network === 'testnet' || network === 'mainnet';\n}\n","export type Network = 'testnet' | 'mainnet';\n\nexport interface NetworkConfig {\n  baseUrl: string;\n  chainId?: number;\n  name: string;\n}\n\nexport const NETWORK_CONFIGS: Record<Network, NetworkConfig> = {\n  testnet: {\n    baseUrl: 'https://crossera-testnet.vercel.app',\n    chainId: 1144,\n    name: 'CrossFi Testnet'\n  },\n  mainnet: {\n    baseUrl: 'https://crossera.vercel.app',\n    chainId: 1144,\n    name: 'CrossFi Mainnet'\n  }\n};\n","import { Network, NETWORK_CONFIGS } from '../types/network';\nimport { validateNetwork } from './validation';\n\nexport function getNetworkBaseUrl(network: Network): string {\n  validateNetwork(network);\n  return NETWORK_CONFIGS[network].baseUrl;\n}\n\nexport function getAvailableNetworks(): Network[] {\n  return Object.keys(NETWORK_CONFIGS) as Network[];\n}\n\nexport function getNetworkConfig(network: Network) {\n  validateNetwork(network);\n  return NETWORK_CONFIGS[network];\n}\n","import axios, { AxiosInstance, AxiosError } from 'axios';\nimport { Network, NETWORK_CONFIGS } from '../types/network';\n\nexport class CrossEraAPIClient {\n  private clients: Map<Network, AxiosInstance> = new Map();\n\n  constructor() {\n    this.initializeClients();\n  }\n\n  private initializeClients() {\n    Object.entries(NETWORK_CONFIGS).forEach(([network, config]) => {\n      const client = axios.create({\n        baseURL: config.baseUrl,\n        timeout: 10000,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      // Add response interceptor for error handling\n      client.interceptors.response.use(\n        (response) => response,\n        (error: AxiosError) => {\n          const networkName = network as Network;\n          const message = this.getErrorMessage(error, networkName);\n          const enhancedError = new Error(message);\n          (enhancedError as any).network = networkName;\n          (enhancedError as any).status = error.response?.status;\n          throw enhancedError;\n        }\n      );\n\n      this.clients.set(network as Network, client);\n    });\n  }\n\n  private getErrorMessage(error: AxiosError, network: Network): string {\n    if (error.response) {\n      // Server responded with error status\n      const status = error.response.status;\n      const data = error.response.data as any;\n      \n      if (status === 404) {\n        return `Resource not found on ${network}`;\n      } else if (status === 400) {\n        return data?.error || `Bad request to ${network}`;\n      } else if (status === 500) {\n        return `Internal server error on ${network}`;\n      } else {\n        return `Request failed with status ${status} on ${network}`;\n      }\n    } else if (error.request) {\n      // Request was made but no response received\n      return `Network error: Unable to reach ${network}`;\n    } else {\n      // Something else happened\n      return `Error: ${error.message}`;\n    }\n  }\n\n  getClient(network: Network): AxiosInstance {\n    const client = this.clients.get(network);\n    if (!client) {\n      throw new Error(`No client found for network: ${network}`);\n    }\n    return client;\n  }\n}\n","import { \n  Network, \n  GetAppIdParams, \n  SubmitTransactionParams, \n  SDKConfig, \n  TransactionResult, \n  NetworkConfig \n} from './types';\nimport { validateAddress, validateTransactionHash, validateNetwork } from './utils/validation';\nimport { getAvailableNetworks, getNetworkConfig } from './utils/network';\nimport { CrossEraAPIClient } from './api/client';\n\nexport class CrossEraSDK {\n  private apiClient: CrossEraAPIClient;\n  private defaultNetwork?: Network;\n\n  constructor(config?: SDKConfig) {\n    this.apiClient = new CrossEraAPIClient();\n    this.defaultNetwork = config?.defaultNetwork;\n  }\n\n  /**\n   * Get app ID by wallet address on specified network\n   * @param params - Parameters object\n   * @param params.address - Wallet address\n   * @param params.network - Network to query ('testnet' or 'mainnet')\n   * @returns Promise<string | null> - App ID or null if not found\n   * \n   * @example\n   * ```typescript\n   * const sdk = new CrossEraSDK();\n   * const appId = await sdk.getAppIdByAddress({\n   *   address: '0x46992B61b7A1d2e4F59Cd881B74A96a549EF49BF',\n   *   network: 'testnet'\n   * });\n   * ```\n   */\n  async getAppIdByAddress(params: GetAppIdParams): Promise<string | null> {\n    const { address, network } = params;\n\n    // Validate parameters\n    validateAddress(address);\n    validateNetwork(network);\n\n    try {\n      const response = await this.apiClient.getClient(network).get(\n        `/api/projects/address/${address}`\n      );\n\n      return response.data.appId || null;\n    } catch (error: any) {\n      if (error.status === 404) {\n        return null;\n      }\n      throw new Error(`Failed to get app ID for address ${address} on ${network}: ${error.message}`);\n    }\n  }\n\n  /**\n   * Submit transaction for rewards on specified network\n   * @param params - Parameters object\n   * @param params.transactionHash - Transaction hash to submit\n   * @param params.network - Network to submit to ('testnet' or 'mainnet')\n   * @returns Promise<TransactionResult> - Processing result\n   * \n   * @example\n   * ```typescript\n   * const sdk = new CrossEraSDK();\n   * const result = await sdk.submitTransaction({\n   *   transactionHash: '0xede6251cb0667ac7a2b51bbb9308c5b244321fe4dbb9145e1a084e6bc84053de',\n   *   network: 'testnet'\n   * });\n   * ```\n   */\n  async submitTransaction(params: SubmitTransactionParams): Promise<TransactionResult> {\n    const { transactionHash, network } = params;\n\n    // Validate parameters\n    validateTransactionHash(transactionHash);\n    validateNetwork(network);\n\n    try {\n      const response = await this.apiClient.getClient(network).post('/api/submit', {\n        transaction_hash: transactionHash,\n      });\n\n      return {\n        ...response.data.data,\n        network,\n      };\n    } catch (error: any) {\n      throw new Error(`Failed to submit transaction ${transactionHash} on ${network}: ${error.message}`);\n    }\n  }\n\n  /**\n   * Get network configuration\n   * @param network - Network to get config for\n   * @returns NetworkConfig - Network configuration\n   * \n   * @example\n   * ```typescript\n   * const config = sdk.getNetworkConfig('testnet');\n   * console.log(config.baseUrl); // 'https://crossera-testnet.vercel.app'\n   * ```\n   */\n  getNetworkConfig(network: Network): NetworkConfig {\n    validateNetwork(network);\n    return getNetworkConfig(network);\n  }\n\n  /**\n   * List available networks\n   * @returns Network[] - Available networks\n   * \n   * @example\n   * ```typescript\n   * const networks = sdk.getAvailableNetworks();\n   * console.log(networks); // ['testnet', 'mainnet']\n   * ```\n   */\n  getAvailableNetworks(): Network[] {\n    return getAvailableNetworks();\n  }\n}\n\n// Export types for external use\nexport type {\n  Network,\n  GetAppIdParams,\n  SubmitTransactionParams,\n  SDKConfig,\n  TransactionResult,\n  NetworkConfig,\n  CampaignMetric,\n  APIError,\n} from './types';\n\n// Export utilities\nexport { \n  validateAddress, \n  validateTransactionHash, \n  validateNetwork,\n  isValidNetwork \n} from './utils/validation';\n\nexport { \n  getNetworkBaseUrl, \n  getAvailableNetworks, \n  getNetworkConfig \n} from './utils/network';\n\n// Named export only (removed default export to avoid mixing warnings)\n"],"names":[],"mappings":"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"}